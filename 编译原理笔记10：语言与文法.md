# 编译原理笔记10：语言与文法

词法规则、语法规则都以形式化的方法对语言进行描述，这样的规则就叫文法。在使用 lex 的时候，我们就可以使用文法来简单地定义和修改语言。

其实，CFG 也是可以描述词法的。但为什么不这么做呢？

## 正规式到 CFG 的转换

推论：正规式所描述的语言结构都可以用 CFG 描述，反之不一定。

从正规式到 CFG 的对应关系：

1. 构造正规式的 NFA；

2. 若 0 为初态，则 A0 为开始符号；

3. 对于 move(i, a) = j，引入产生式 Ai → aAj；

   【从 i 状态经过标记为 a 的边转移到 j 状态。对于这样的状态转移关系，我们可以为其生成对应的产生式 Ai → aAj 】

   我们在这里引入 Ai → aAj（这里的 a 是指经过的边）。NFA 中的每个边，即每个状态转移都会生成一个对应的产生式。我们使用这种方法将 NFA 中的状态转移变成 CFG 中的产生式。

4. 对于 move(i, ε) = j，引入产生式 Ai → Aj；

   为空转移生成与之对应的产生式。

5. 若 i 是终态，则引入产生式 Ai → ε（终态，对应的是空产生式）。

NFA 中有状态和状态间的转移，我们就可以把这些变成一个 CFG